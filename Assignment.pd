#N canvas 858 501 997 541 10;
#N canvas 0 0 450 300 (subpatch) 0;
#X array vcd_dist 20 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 20 0 200 140 1 0 0;
#X restore -20 95 graph;
#N canvas 0 41 450 300 (subpatch) 0;
#X array vl_dist 20 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 20 0 200 140 1 0 0;
#X restore 345 95 graph;
#X obj 45 -14 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text -35 -14 Microphone;
#X text 69 -14 Sound File;
#X obj 141 -13 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 164 -15 Stop;
#X obj -58 -13 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 557 121 5 0 0 0 - - -;
#X floatatom 187 125 5 0 0 0 - - -;
#X obj 251 95 r reset;
#X obj 620 95 r reset;
#X obj 187 95 r vcd_avg;
#X obj 557 94 r vl_avg;
#X floatatom 189 219 5 0 0 0 - - -;
#X obj 189 188 r reset;
#X obj 251 189 r vcd_sd;
#X floatatom 557 215 5 0 0 0 - - -;
#X obj 557 181 r reset;
#X obj 615 183 r vl_sd;
#N canvas 0 0 450 300 (subpatch) 0;
#X array f1_dist 30 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 30 0 200 140 1 0 0;
#X restore -20 284 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array f2_dist 30 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 30 0 200 140 1 0 0;
#X restore 346 289 graph;
#X obj 201 -15 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 220 -16 Reset;
#X text 222 217 standard deviation;
#X text 592 215 standard deviation;
#X text 600 119 average;
#X text 226 124 average;
#X text 137 61 voiced durations;
#X text 492 58 voiceless durations;
#X floatatom 188 310 7 0 0 0 - - -;
#X obj 188 283 r f1_avg;
#X obj 253 283 r reset;
#X floatatom 555 312 7 0 0 0 - - -;
#X obj 555 287 r f2_avg;
#X obj 621 288 r reset;
#X text 150 257 formant 1;
#X text 521 261 formant 2;
#X floatatom 188 407 5 0 0 0 - - -;
#X obj 188 372 r f1_sd;
#X obj 253 371 r reset;
#X obj 556 372 r f2_sd;
#X obj 621 374 r reset;
#X floatatom 556 409 5 0 0 0 - - -;
#N canvas 738 372 915 476 analysis 0;
#X obj 29 18 inlet;
#X text 24 1 mic toggle;
#X obj 149 18 inlet;
#X text 120 -1 sound file bang;
#X obj 263 15 inlet;
#X text 264 -4 stop;
#X obj 526 16 inlet;
#X text 520 -8 reset;
#N canvas 0 0 1916 997 formantfinder 1;
#X obj -4 -118 inlet~;
#X obj 114 -15 lop~ 2400;
#X obj 75 141 /;
#X obj 268 131 /;
#X floatatom 82 248 5 0 0 0 - - -;
#X floatatom 270 243 5 0 0 0 - - -;
#X floatatom 143 246 5 0 0 0 - - -;
#X floatatom 359 221 5 0 0 0 - - -;
#X obj 271 289 *;
#X obj 84 294 *;
#X floatatom 83 404 5 0 0 0 - - -;
#X floatatom 270 410 5 0 0 0 - - -;
#X obj -3 -11 lop~ 850;
#X msg 30 492 relative;
#X msg 208 483 relative;
#X obj 83 459 t b f;
#X obj 269 458 t b f;
#X obj 82 565 outlet;
#X obj 255 562 outlet;
#X obj 152 137 loadbang;
#X obj 359 131 loadbang;
#X obj 200 91 env~ 2048;
#X obj 278 89 env~ 2048;
#X obj 107 93 env~ 2048;
#X obj 26 93 env~ 2048;
#X msg 138 477 clear;
#X obj 138 451 r reset_hist;
#X obj 112 -45 hip~ 850;
#X obj 376 523 outlet;
#X obj 454 522 outlet;
#X obj 375 489 average;
#X obj 453 488 average;
#X text 375 539 f1 average;
#X text 453 541 f2 average;
#X text 77 582 f1 hist;
#X text 252 579 f2 hist;
#X obj 546 523 std_dev;
#X obj 548 554 outlet;
#X text 545 577 f1 sd;
#X text 624 574 f2 sd;
#N canvas 413 402 946 409 cepstral_analysis 1;
#X obj 19 150 framp~;
#X obj 19 187 log~;
#X obj 18 262 framp~;
#X obj 100 321 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 99 350 metro 1000;
#X msg 146 317 stop;
#X obj 19 336 framp~;
#X obj 35 389 print~ frequencies;
#X obj 19 88 inlet~;
#X obj 454 297 osc~;
#X obj 454 249 samplerate~;
#X obj 454 320 *~ -0.5;
#X obj 454 343 +~ 0.5;
#X obj 442 219 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 442 368 tabwrite~ \$0-Hanning;
#X obj 454 273 /;
#X obj 442 178 t b f;
#X text 473 221 Create Hanning window;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-Hanning 2048 float 0;
#X coords 0 1 2047 0 200 140 1;
#X restore 490 411 graph;
#X obj 462 143 block~;
#X msg 562 110 resize \$1;
#X floatatom 442 66 5 0 0 0 - - -;
#X obj 562 143 s \$0-Hanning;
#X obj 469 203 / 4;
#X msg 442 36 2048;
#X msg 462 110 set \$1 4 1;
#X obj 441 10 loadbang;
#X obj 18 297 fft~;
#X obj 18 223 ifft~;
#X obj 20 127 fft~;
#X text 67 124 comment;
#X text 55 184 log of the magnitude;
#X text 63 293 fft to reverse the ifft;
#X text 13 412 we should be at a point where we can get the formants
but f1 and f2 still seem indistiguishable;
#X connect 0 1 1 0;
#X connect 1 0 28 0;
#X connect 2 0 27 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 8 0 29 0;
#X connect 9 0 11 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 10 0;
#X connect 13 0 14 0;
#X connect 15 0 9 0;
#X connect 16 0 13 0;
#X connect 16 1 23 0;
#X connect 20 0 22 0;
#X connect 21 0 25 0;
#X connect 21 0 20 0;
#X connect 21 0 16 0;
#X connect 23 0 15 1;
#X connect 24 0 21 0;
#X connect 25 0 19 0;
#X connect 26 0 24 0;
#X connect 27 0 6 0;
#X connect 27 1 6 1;
#X connect 28 0 2 0;
#X connect 29 0 0 0;
#X connect 29 1 0 1;
#X restore 551 -41 pd cepstral_analysis;
#X obj 623 552 outlet;
#X text 3 406 f1 frequency;
#X text 191 409 f2 frequency;
#X text 484 -21 I've left some attempted Cepstral Analysis code in
this subpatch \, I couldn't get it to work \, so I resorted to the
method on the right which is less robust.;
#X text 393 353 get rid of max and minimum values as they are likely
false positives;
#X obj 75 182 clip 0 1;
#X obj 268 181 clip 0 1;
#X obj 26 61 bp~ 200 50;
#X obj 276 55 bp~ 2400 50;
#X obj 198 56 bp~ 850 50;
#X obj 107 60 bp~ 850 50;
#X obj -2 -44 hip~ 200;
#X msg 143 218 650;
#X msg 358 190 1550;
#X msg 405 191 850;
#X floatatom 406 222 5 0 0 0 - - -;
#X obj 272 324 +;
#X msg 185 218 200;
#X floatatom 186 247 5 0 0 0 - - -;
#X obj 84 331 +;
#X obj 84 361 select 200 850;
#X obj 272 362 select 850 2400;
#X obj 82 528 hist 200 2400 30;
#X obj 255 525 hist 200 2400 30;
#X text 449 180 ratio between low and high values of the formant \,
making sure the ratio is between 0 and 1;
#X text 339 283 scale up the ratio \, first by multiplying by the difference
between the max and min values of the formant \, and then by offsetting
by the lower bound so we have a number between say 850 and 2400 rather
than 0 and 1550;
#X obj 623 523 std_dev;
#X text 483 25 Some of this code is still used \, such as the code
that sets the window size using block~;
#X connect 0 0 52 0;
#X connect 0 0 27 0;
#X connect 0 0 40 0;
#X connect 1 0 49 0;
#X connect 1 0 50 0;
#X connect 2 0 46 0;
#X connect 3 0 47 0;
#X connect 4 0 9 0;
#X connect 5 0 8 0;
#X connect 6 0 9 1;
#X connect 7 0 8 1;
#X connect 8 0 57 0;
#X connect 9 0 60 0;
#X connect 10 0 15 0;
#X connect 10 0 30 0;
#X connect 10 0 36 0;
#X connect 11 0 16 0;
#X connect 11 0 31 0;
#X connect 11 0 67 0;
#X connect 12 0 48 0;
#X connect 12 0 51 0;
#X connect 13 0 63 0;
#X connect 14 0 64 0;
#X connect 15 0 13 0;
#X connect 15 1 63 0;
#X connect 16 0 14 0;
#X connect 16 1 64 0;
#X connect 19 0 53 0;
#X connect 19 0 58 0;
#X connect 20 0 54 0;
#X connect 20 0 55 0;
#X connect 21 0 3 0;
#X connect 22 0 3 1;
#X connect 23 0 2 1;
#X connect 24 0 2 0;
#X connect 25 0 63 0;
#X connect 25 0 64 0;
#X connect 26 0 25 0;
#X connect 27 0 1 0;
#X connect 30 0 28 0;
#X connect 30 0 36 1;
#X connect 31 0 29 0;
#X connect 31 0 67 1;
#X connect 36 0 37 0;
#X connect 46 0 4 0;
#X connect 47 0 5 0;
#X connect 48 0 24 0;
#X connect 49 0 22 0;
#X connect 50 0 21 0;
#X connect 51 0 23 0;
#X connect 52 0 12 0;
#X connect 53 0 6 0;
#X connect 54 0 7 0;
#X connect 55 0 56 0;
#X connect 56 0 57 1;
#X connect 57 0 62 0;
#X connect 58 0 59 0;
#X connect 59 0 60 1;
#X connect 60 0 61 0;
#X connect 61 2 10 0;
#X connect 62 2 11 0;
#X connect 63 0 17 0;
#X connect 64 0 18 0;
#X connect 67 0 41 0;
#X restore 32 125 pd formantfinder;
#N canvas 710 304 779 432 voicingdetector 1;
#X obj 22 37 sigmund~;
#X floatatom 22 66 5 0 0 0 - - -;
#X obj 66 129 > 80;
#X obj 22 8 inlet~;
#X obj 135 274 outlet;
#X obj 22 98 mtof;
#X obj 22 275 outlet;
#X obj 319 277 outlet;
#X text 28 209 voiceless sounds;
#X text 164 208 voiced sounds;
#X obj 209 277 outlet;
#X text 21 296 average;
#X text 135 296 histogram;
#X text 208 294 average;
#X text 317 295 histogram;
#X text 101 123 human voice range starts at around 80Hz \, anything
below that is likely unvoiced;
#X text 285 39 sigmund~ outputs -1500 when it can't find a pitch. Voiceless
sounds have no pitch \, so detecting -1500 should be enough. To be
safe \, we detect anything less than normal human voice range.;
#X obj 261 276 outlet;
#X obj 82 275 outlet;
#X text 78 295 std-dev;
#X text 261 295 std-dev;
#X floatatom 171 66 5 0 0 0 - - -;
#X obj 22 130 < 80;
#X obj 171 106 > 60;
#X obj 22 172 &&;
#X obj 155 171 &&;
#X text 203 104 human voice range starts at around 60dB normally;
#X obj 155 228 duration_histogram;
#X text 59 65 pitch;
#X text 208 63 amplitude;
#X obj 22 230 duration_histogram;
#X connect 0 0 1 0;
#X connect 0 1 21 0;
#X connect 1 0 5 0;
#X connect 2 0 25 0;
#X connect 3 0 0 0;
#X connect 5 0 22 0;
#X connect 5 0 2 0;
#X connect 21 0 23 0;
#X connect 22 0 24 0;
#X connect 23 0 24 1;
#X connect 23 0 25 1;
#X connect 24 0 30 0;
#X connect 25 0 27 0;
#X connect 27 0 10 0;
#X connect 27 1 17 0;
#X connect 27 2 7 0;
#X connect 30 0 6 0;
#X connect 30 1 18 0;
#X connect 30 2 4 0;
#X restore 202 122 pd voicingdetector;
#X obj 76 67 adc~;
#X obj 31 96 *~;
#X floatatom 31 68 5 0 0 0 - - -;
#X msg 352 71 \; pd dsp 1;
#X msg 439 71 \; pd dsp 0;
#X msg 593 116 0;
#X obj 594 147 s reset;
#X obj 226 172 s vl_avg;
#X obj 332 172 s vcd_avg;
#X obj 243 203 tabset vl_dist;
#X obj 340 201 tabset vcd_dist;
#X msg 653 71 \; vcd_dist const 0 \;;
#X msg 653 115 \; vl_dist const 0 \;;
#X msg 780 117 \; f1_dist const 0 \;;
#X msg 781 72 \; f2_dist const 0 \;;
#X obj 282 172 s vl_sd;
#X obj 394 172 s vcd_sd;
#X obj 20 204 tabset f1_dist;
#X obj 121 204 tabset f2_dist;
#X obj 563 175 s reset_hist;
#X obj 201 69 open_file;
#X obj 6 173 s f1_avg;
#X obj 63 173 s f2_avg;
#X obj 119 173 s f1_sd;
#X obj 169 173 s f2_sd;
#X connect 0 0 12 0;
#X connect 0 0 13 0;
#X connect 2 0 30 0;
#X connect 2 0 13 0;
#X connect 4 0 14 0;
#X connect 6 0 15 0;
#X connect 6 0 21 0;
#X connect 6 0 29 0;
#X connect 6 0 22 0;
#X connect 6 0 24 0;
#X connect 6 0 23 0;
#X connect 8 0 27 0;
#X connect 8 1 28 0;
#X connect 8 2 31 0;
#X connect 8 3 32 0;
#X connect 8 4 33 0;
#X connect 8 5 34 0;
#X connect 9 0 17 0;
#X connect 9 1 25 0;
#X connect 9 2 19 0;
#X connect 9 3 18 0;
#X connect 9 4 26 0;
#X connect 9 5 20 0;
#X connect 10 0 11 1;
#X connect 11 0 8 0;
#X connect 11 0 9 0;
#X connect 12 0 11 0;
#X connect 15 0 16 0;
#X connect 30 0 8 0;
#X connect 30 0 9 0;
#X coords 0 476 1 475 800 450 0;
#X restore -58 29 pd analysis;
#X text 234 308 average;
#X text 602 311 average;
#X text 224 407 standard deviation;
#X text 594 407 standard deviation;
#X connect 2 0 44 1;
#X connect 5 0 44 2;
#X connect 7 0 44 0;
#X connect 10 0 9 0;
#X connect 11 0 8 0;
#X connect 12 0 9 0;
#X connect 13 0 8 0;
#X connect 15 0 14 0;
#X connect 16 0 14 0;
#X connect 18 0 17 0;
#X connect 19 0 17 0;
#X connect 22 0 44 3;
#X connect 31 0 30 0;
#X connect 32 0 30 0;
#X connect 34 0 33 0;
#X connect 35 0 33 0;
#X connect 39 0 38 0;
#X connect 40 0 38 0;
#X connect 41 0 43 0;
#X connect 42 0 43 0;
