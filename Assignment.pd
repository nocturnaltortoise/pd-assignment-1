#N canvas 0 91 997 541 10;
#N canvas 345 117 1017 505 formantfinder 1;
#X obj -4 -118 inlet~;
#X obj 320 -10 lop~ 2400;
#X obj 281 146 /;
#X obj 474 136 /;
#X floatatom 288 253 5 0 0 0 - - -;
#X floatatom 476 248 5 0 0 0 - - -;
#X floatatom 349 251 5 0 0 0 - - -;
#X floatatom 537 248 5 0 0 0 - - -;
#X obj 481 295 *;
#X obj 290 299 *;
#X floatatom 289 419 5 0 0 0 - - -;
#X floatatom 482 420 5 0 0 0 - - -;
#X obj 203 -6 lop~ 850;
#X msg 250 487 relative;
#X msg 428 488 relative;
#X obj 294 457 t b f;
#X obj 484 454 t b f;
#X obj 306 569 outlet;
#X obj 485 567 outlet;
#X obj 358 142 loadbang;
#X obj 531 134 loadbang;
#X obj 406 96 env~ 2048;
#X obj 484 94 env~ 2048;
#X obj 313 98 env~ 2048;
#X obj 232 98 env~ 2048;
#X msg 392 396 clear;
#X obj 392 303 r reset_hist;
#X obj 318 -40 hip~ 850;
#X obj 699 423 outlet;
#X obj 777 422 outlet;
#X obj 698 389 average;
#X obj 776 388 average;
#X text 698 439 f1 average;
#X text 776 441 f2 average;
#X text 300 589 f1 hist;
#X text 484 587 f2 hist;
#X obj 707 511 std_dev;
#X obj 709 542 outlet;
#X text 711 563 f1 sd;
#X text 785 562 f2 sd;
#N canvas 413 227 450 300 cepstral_analysis 0;
#X obj 19 150 framp~;
#X obj 19 187 log~;
#X obj 18 262 framp~;
#X obj 84 281 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 83 310 metro 1000;
#X msg 130 277 stop;
#X obj 19 336 framp~;
#X obj 38 382 print~ frequencies;
#X obj 48 6 inlet~;
#X obj 331 293 osc~;
#X obj 331 245 samplerate~;
#X obj 331 316 *~ -0.5;
#X obj 331 339 +~ 0.5;
#X obj 319 222 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 319 364 tabwrite~ \$0-Hanning;
#X obj 331 269 /;
#X obj 319 174 t b f;
#X text 350 217 Create Hanning window;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-Hanning 2048 float 0;
#X coords 0 1 2047 0 200 140 1;
#X restore 318 408 graph;
#X obj 339 139 block~;
#X msg 439 106 resize \$1;
#X floatatom 319 62 5 0 0 0 - - -;
#X obj 439 139 s \$0-Hanning;
#X obj 346 199 / 4;
#X text 196 106 sample rate is 11kHz =>;
#X msg 319 32 2048;
#X msg 339 106 set \$1 4 1;
#X obj 318 6 loadbang;
#X obj 18 297 fft~;
#X obj 18 223 ifft~;
#X obj 20 127 fft~;
#X text 67 124 comment;
#X text 55 184 log of the magnitude;
#X text 164 282 fft to reverse the ifft;
#X text 16 402 at this point we should be at log magnitude but f1 and
f2 still seem indistiguishable;
#X connect 0 1 1 0;
#X connect 1 0 29 0;
#X connect 2 0 28 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 8 0 30 0;
#X connect 9 0 11 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 10 0;
#X connect 13 0 14 0;
#X connect 15 0 9 0;
#X connect 16 0 13 0;
#X connect 16 1 23 0;
#X connect 20 0 22 0;
#X connect 21 0 26 0;
#X connect 21 0 20 0;
#X connect 21 0 16 0;
#X connect 23 0 15 1;
#X connect 25 0 21 0;
#X connect 26 0 19 0;
#X connect 27 0 25 0;
#X connect 28 0 6 0;
#X connect 28 1 6 1;
#X connect 29 0 2 0;
#X connect 30 0 0 0;
#X connect 30 1 0 1;
#X restore 614 -64 pd cepstral_analysis;
#X obj 784 511 std_dev;
#X obj 784 540 outlet;
#X text -11 202 ratio between low and high values of the formant;
#X text 205 419 f1 frequency;
#X text 516 419 f2 frequency;
#X text 547 -44 I've left some attempted Cepstral Analysis code in
this subpatch \, I couldn't get it to work \, so I resorted to the
method on the right which is less robust.;
#X text -87 359 get rid of max and minimum values as they are likely
false positives;
#X obj 281 187 clip 0 1;
#X obj 474 186 clip 0 1;
#X obj 232 66 bp~ 200 50;
#X obj 482 60 bp~ 2400 50;
#X obj 404 61 bp~ 850 50;
#X obj 313 65 bp~ 850 50;
#X obj 204 -39 hip~ 200;
#X msg 349 223 650;
#X msg 536 217 1550;
#X msg 583 218 850;
#X floatatom 584 249 5 0 0 0 - - -;
#X obj 482 326 +;
#X msg 391 223 200;
#X floatatom 392 252 5 0 0 0 - - -;
#X obj 290 335 +;
#X obj 289 366 select 200 850;
#X obj 482 364 select 850 2400;
#X obj 306 529 hist 200 2400 30;
#X obj 484 532 hist 200 2400 30;
#X connect 0 0 40 0;
#X connect 0 0 54 0;
#X connect 0 0 27 0;
#X connect 1 0 51 0;
#X connect 1 0 52 0;
#X connect 2 0 48 0;
#X connect 3 0 49 0;
#X connect 4 0 9 0;
#X connect 5 0 8 0;
#X connect 6 0 9 1;
#X connect 7 0 8 1;
#X connect 8 0 59 0;
#X connect 9 0 62 0;
#X connect 10 0 15 0;
#X connect 10 0 30 0;
#X connect 10 0 36 0;
#X connect 11 0 16 0;
#X connect 11 0 31 0;
#X connect 11 0 41 0;
#X connect 12 0 50 0;
#X connect 12 0 53 0;
#X connect 13 0 65 0;
#X connect 14 0 66 0;
#X connect 15 0 13 0;
#X connect 15 1 65 0;
#X connect 16 0 14 0;
#X connect 16 1 66 0;
#X connect 19 0 55 0;
#X connect 19 0 60 0;
#X connect 20 0 56 0;
#X connect 20 0 57 0;
#X connect 21 0 3 0;
#X connect 22 0 3 1;
#X connect 23 0 2 1;
#X connect 24 0 2 0;
#X connect 25 0 65 0;
#X connect 25 0 66 0;
#X connect 26 0 25 0;
#X connect 27 0 1 0;
#X connect 30 0 28 0;
#X connect 30 0 36 1;
#X connect 31 0 29 0;
#X connect 31 0 41 1;
#X connect 36 0 37 0;
#X connect 41 0 42 0;
#X connect 48 0 4 0;
#X connect 49 0 5 0;
#X connect 50 0 24 0;
#X connect 51 0 22 0;
#X connect 52 0 21 0;
#X connect 53 0 23 0;
#X connect 54 0 12 0;
#X connect 55 0 6 0;
#X connect 56 0 7 0;
#X connect 57 0 58 0;
#X connect 58 0 59 1;
#X connect 59 0 64 0;
#X connect 60 0 61 0;
#X connect 61 0 62 1;
#X connect 62 0 63 0;
#X connect 63 2 10 0;
#X connect 64 2 11 0;
#X connect 65 0 17 0;
#X connect 66 0 18 0;
#X restore 60 63 pd formantfinder;
#N canvas 228 236 779 432 voicingdetector 1;
#X obj 83 42 sigmund~;
#X floatatom 24 74 5 0 0 0 - - -;
#X obj 70 131 > 80;
#X obj 82 14 inlet~;
#X obj 97 276 outlet;
#X obj 43 101 mtof;
#X obj 25 278 outlet;
#X obj 319 277 outlet;
#X text 39 209 voiceless sounds;
#X text 218 196 voiced sounds;
#X obj 218 277 outlet;
#X text 27 298 average;
#X text 95 297 histogram;
#X text 220 298 average;
#X text 320 300 histogram;
#X text 119 127 human voice range starts at around 80Hz \, anything
below that is likely unvoiced;
#X text 309 37 sigmund~ outputs -1500 when it can't find a pitch. Voiceless
sounds have no pitch \, so detecting -1500 should be enough. To be
safe \, we detect anything less than normal human voice range.;
#X obj 417 277 outlet;
#X obj 164 276 outlet;
#X text 166 297 std-dev;
#X text 419 297 std-dev;
#X floatatom 116 87 5 0 0 0 - - -;
#X obj 21 132 < 80;
#X obj 171 106 > 60;
#X obj 37 184 &&;
#X obj 172 175 &&;
#X text 213 105 human voice range starts at around 60dB normally;
#X obj 203 217 duration_histogram;
#X obj 24 239 duration_histogram;
#X connect 0 0 1 0;
#X connect 0 1 21 0;
#X connect 1 0 5 0;
#X connect 2 0 25 0;
#X connect 3 0 0 0;
#X connect 5 0 22 0;
#X connect 5 0 2 0;
#X connect 21 0 23 0;
#X connect 22 0 24 0;
#X connect 23 0 24 1;
#X connect 23 0 25 1;
#X connect 24 0 28 0;
#X connect 25 0 27 0;
#X connect 27 0 10 0;
#X connect 27 1 17 0;
#X connect 27 2 7 0;
#X connect 28 0 6 0;
#X connect 28 1 18 0;
#X connect 28 2 4 0;
#X restore 207 58 pd voicingdetector;
#N canvas 0 0 450 300 (subpatch) 0;
#X array vcd_dist 20 float 3;
#A 0 0.251748 0.269231 0.118881 0.0839161 0.0629371 0.0804196 0.0559441
0.0594406 0.0034965 0.00699301 0.0034965 0 0 0 0 0 0 0 0 0.0034965
;
#X coords 0 1 20 0 200 140 1 0 0;
#X restore 14 181 graph;
#N canvas 0 41 450 300 (subpatch) 0;
#X array vl_dist 20 float 3;
#A 0 0.399027 0.345499 0.187348 0.0437956 0.0145985 0 0.00729927 0
0 0 0 0 0 0 0 0 0 0 0 0.00243309;
#X coords 0 1 20 0 200 140 1 0 0;
#X restore 379 181 graph;
#X obj 80 -21 adc~;
#X obj 205 -48 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 74 14 *~;
#X floatatom 34 -19 5 0 0 0 - - -;
#X text 58 -51 Microphone;
#X text 229 -48 Sound File;
#X msg 356 -17 \; pd dsp 1;
#X obj 455 -47 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 455 4 \; pd dsp 0;
#X text 478 -49 Stop;
#X obj 35 -50 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 597 205 5 0 0 0 - - -;
#X floatatom 234 204 5 0 0 0 - - -;
#X msg 597 28 0;
#X obj 598 59 s reset;
#X obj 293 175 r reset;
#X obj 654 181 r reset;
#X obj 244 85 s vl_avg;
#X obj 354 84 s vcd_avg;
#X obj 227 174 r vcd_avg;
#X obj 591 180 r vl_avg;
#X obj 247 115 tabset vl_dist;
#X obj 401 111 tabset vcd_dist;
#X msg 657 -17 \; vcd_dist const 0 \;;
#X msg 657 27 \; vl_dist const 0 \;;
#X msg 784 29 \; f1_dist const 0 \;;
#X msg 785 -16 \; f2_dist const 0 \;;
#X floatatom 234 289 5 0 0 0 - - -;
#X obj 233 258 r reset;
#X obj 296 259 r vcd_sd;
#X floatatom 596 284 5 0 0 0 - - -;
#X obj 596 250 r reset;
#X obj 654 252 r vl_sd;
#X obj 297 84 s vl_sd;
#X obj 422 84 s vcd_sd;
#N canvas 0 0 450 300 (subpatch) 0;
#X array f1_dist 30 float 3;
#A 0 0 0 0 0 0.0208333 0.09375 0.0833333 0.177083 0.40625 0.21875 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 30 0 200 140 1 0 0;
#X restore 14 370 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array f2_dist 30 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0.0107527 0 0.0215054 0.0107527 0.0322581
0.0107527 0.0215054 0.0215054 0.0215054 0.0483871 0.016129 0.0215054
0.0483871 0.0806452 0.107527 0.11828 0.11828 0.145161 0.145161;
#X coords 0 1 30 0 200 140 1 0 0;
#X restore 380 375 graph;
#X obj 24 116 tabset f1_dist;
#X obj 125 116 tabset f2_dist;
#X obj 567 87 s reset_hist;
#X obj 537 -48 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 556 -51 Reset;
#X obj 207 -12 open_file;
#X obj 17 89 s f1_avg;
#X obj 73 89 s f2_avg;
#X text 233 310 standard deviation;
#X text 593 307 standard deviation;
#X text 595 224 average;
#X text 229 223 average;
#X text 171 147 voiced durations;
#X text 526 144 voiceless durations;
#X floatatom 232 394 5 0 0 0 - - -;
#X obj 231 369 r f1_avg;
#X obj 296 369 r reset;
#X floatatom 600 399 5 0 0 0 - - -;
#X obj 600 374 r f2_avg;
#X obj 666 375 r reset;
#X text 184 343 formant 1;
#X text 555 347 formant 2;
#X obj 130 87 s f1_sd;
#X obj 177 89 s f2_sd;
#X floatatom 231 462 5 0 0 0 - - -;
#X obj 230 427 r f1_sd;
#X obj 295 426 r reset;
#X obj 601 431 r f2_sd;
#X obj 666 433 r reset;
#X floatatom 602 465 5 0 0 0 - - -;
#X obj 776 332 realtime;
#X floatatom 774 373 5 0 0 0 - - -;
#X connect 0 0 41 0;
#X connect 0 1 42 0;
#X connect 0 2 47 0;
#X connect 0 3 63 0;
#X connect 0 4 48 0;
#X connect 0 5 64 0;
#X connect 1 0 21 0;
#X connect 1 1 25 0;
#X connect 1 2 37 0;
#X connect 1 3 22 0;
#X connect 1 4 26 0;
#X connect 1 5 38 0;
#X connect 4 0 6 1;
#X connect 5 0 10 0;
#X connect 5 0 46 0;
#X connect 6 0 0 0;
#X connect 6 0 1 0;
#X connect 7 0 6 0;
#X connect 11 0 12 0;
#X connect 11 0 71 1;
#X connect 14 0 7 0;
#X connect 14 0 10 0;
#X connect 17 0 18 0;
#X connect 19 0 16 0;
#X connect 20 0 15 0;
#X connect 23 0 16 0;
#X connect 24 0 15 0;
#X connect 32 0 31 0;
#X connect 33 0 31 0;
#X connect 35 0 34 0;
#X connect 36 0 34 0;
#X connect 44 0 43 0;
#X connect 44 0 17 0;
#X connect 44 0 27 0;
#X connect 44 0 28 0;
#X connect 44 0 29 0;
#X connect 44 0 30 0;
#X connect 46 0 0 0;
#X connect 46 0 1 0;
#X connect 56 0 55 0;
#X connect 57 0 55 0;
#X connect 59 0 58 0;
#X connect 60 0 58 0;
#X connect 66 0 65 0;
#X connect 67 0 65 0;
#X connect 68 0 70 0;
#X connect 69 0 70 0;
#X connect 71 0 72 0;
